<nb-auth-block>
  <h2 class="title">Formation.TN</h2>
  <h4 class="sub-title">Se Connecter</h4>

  <form (ngSubmit)="loginEmail()" #form="ngForm" autocomplete="off">
    <!-- <div *ngIf="errors && errors.length > 0 && !submitted" class="alert alert-danger" role="alert">
      <div><strong>Ooupsss!</strong></div>
      <div *ngFor="let error of errors">{{ error }}</div>
    </div>
    <div *ngIf="messages && messages.length > 0 && submitted" class="alert alert-success" role="alert">
      <div><strong>Success!</strong></div>
      <div *ngFor="let message of messages">{{ message }}</div>
    </div>-->
    <div class="form-group">
        <nb-form-field>
          <nb-icon nbPrefix icon="at-outline" pack="eva"></nb-icon>
          <input
          fullWidth
          nbInput
          placeholder="Email" 
          type="text"
          shape="semi-round"
          id="input-7"
          name="email"
          [(ngModel)]="user.email"
          pattern=".+@.+\..+"
          #email="ngModel"
          [class.form-control-danger]="email.invalid && email.touched"
          [required]="getConfigValue('forms.validation.password.required')"
        />
        </nb-form-field>
      <small
        class="form-text error"
        *ngIf="email.invalid && email.touched && email.errors?.required"
      >
        Email is required!
      </small>
      <small
        class="form-text error"
        *ngIf="email.invalid && email.touched && email.errors?.pattern"
      >
        Email should be the real one!
      </small>
    </div>

    <div class="form-group">
        <nb-form-field>
          <nb-icon nbPrefix icon="lock-outline" pack="eva"></nb-icon>
          <input
          fullWidth 
          nbInput
          [type]="getInputType()"
          id="input-8"
          name="password"
          shape="semi-round"
          placeholder="Password"
          [(ngModel)]="user.password"
          type="password"
          #password="ngModel"
          [class.form-control-danger]="password.invalid && password.touched"
          [required]="getConfigValue('forms.validation.password.required')"
          [minlength]="getConfigValue('forms.validation.password.minLength')"
          [maxlength]="getConfigValue('forms.validation.password.maxLength')"
        />
        <button nbSuffix nbButton ghost (click)="toggleShowPassword($event)">
          <nb-icon [icon]="showPassword ? 'eye-outline' : 'eye-off-2-outline'"
                   pack="eva"
                   [attr.aria-label]="showPassword ? 'hide password' : 'show password'">
          </nb-icon>
        </button>
        </nb-form-field>
      <small
        class="form-text error"
        *ngIf="
          password.invalid && password.touched && password.errors?.required
        "
      >
        Password is required!
      </small>
      <small
        class="form-text error"
        *ngIf="
          password.invalid &&
          password.touched &&
          (password.errors?.minlength || password.errors?.maxlength)
        "
      >
        Password should contains from {{ validation.password.minLength }} to
        {{ validation.password.maxLength }} characters
      </small>
    </div>
    <button
      [disabled]="submitted || !form.valid"
      class="btn btn-block btn-hero-success"
      [class.btn-pulse]="submitted"
      id="regbtn"
    >
      Connexion
    </button>
  </form>
</nb-auth-block>

